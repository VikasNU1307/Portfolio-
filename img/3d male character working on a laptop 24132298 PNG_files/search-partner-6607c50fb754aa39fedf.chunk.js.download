(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{216:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a(38),n=a.n(r),i=a(14),s=a.n(i),c=a(3),o=a(212);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,a,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u(this,e),this.renderResults=function(e,t){t.controllerElem.classList.contains("is-hidden")&&t.controllerElem.classList.remove("is-hidden"),e.data.forEach((function(e,a,r){n.renderResultItem({item:e,index:a,options:t,array:r})}))},this.renderResultItem=function(e){var t=e.item,a=e.index,r=e.options,i=e.array,s=n.formatItem({item:t,index:a,options:r}),c=s.image_height,o=s.image_width;parseInt(c,10)/parseInt(o,10)>.45&&n.insertItem(s,r),a===i.length-1&&n.rejustifyGrid(r)},this.recalcPartnerGrid=function(){window.ezResourceGrid({gridSelector:n.gridContainer,options:{rowHeight:n.recalcRowHeight,maxRows:n.recalcMaxRows,truncate:n.recalcTruncate}})},this.generateUrl=function(e){var t=n.serviceUrl.slice(0);if("undefined"===typeof n.searchTerm||!n.searchTerm){var a=document.querySelector('[data-search-form-target="input"]');n.searchTerm=a.value}t+="?term=".concat(encodeURI(n.searchTerm),"&locale=").concat(e.loc,"&type=").concat(n.partnerContentType),Object(c.g)("partner_service_v2")&&(t+="&v=2"),Object(c.g)("shutterstock_partner")&&(t+="&provider=sstk");var r="undefined"!==typeof e.limit?e.limit:80;t+="&per_page=".concat(r);var i=parseInt(e.page,10);return t+=i?"&page=".concat(i+1):"&page=1",null!=e.padResults&&(t+="&pad_images=".concat(e.padResults)),e.apiparams&&(t+="&".concat(e.apiparams)),e.padWithTerm&&(t+="&pad_with_term=".concat(e.padWithTerm)),t},this.container=t,this.searchTerm=a,this.serviceUrl=r,this.gridContainer=t.querySelector(".ez-resource-grid")||t,this.setupResultTemplate(),window.addEventListener("InitAllGrids",this.recalcPartnerGrid),this.gridCallback=i}var t,a,r;return t=e,a=[{key:"setupResultTemplate",value:function(){var e=Object(c.g)("shutterstock_partner")?"sstk":"istock";this.defaultResultTemplate='\n      <li class="ez-resource-grid__item ez-resource-thumb ez-resource-thumb--'.concat(e,'" data-w="{{image_width}}" data-h="{{image_height}}" data-position="{{position}}" data-item-id="{{id}}">\n        <a class="ez-resource-thumb__link" title="{{description}}" target="_new" href="{{url}}" data-action="click->grid-partner-backfill#trackResourceClick">\n          <img class="ez-resource-thumb__img" src="{{image_src}}" alt="{{description}}" />\n        </a>\n      </li>\n      '),this.customResultTemplateElem=document.querySelector('[data-partner-images-target="resultTemplate"]'),this.customResultTemplateElem?(this.resultTemplate=document.querySelector('[data-partner-images-target="resultTemplate"]').innerHTML,this.customResultTemplateElem.parentNode.removeChild(this.customResultTemplateElem)):this.resultTemplate=this.defaultResultTemplate}},{key:"formatItem",value:function(e){var t=e.item,a=e.index,r=e.options,n=r.largeThumb?"preview":"large_thumb";Object(c.g)("shutterstock_partner")&&(n=r.largeThumb?"huge_thumb":"large_thumb"),t.position=this.calculateTotalIndex(a,r.page,r.limit),t.url="".concat(r.impactRadiusUrl,"&u=").concat(encodeURI(t.url)),"video"===Object(c.i)()&&Object(c.g)("shutterstock_partner")?(t.image_src=t.assets.thumb_jpg.url,t.image_height=270,t.image_width=480):(t.image_src=t.assets[n].url,t.image_height=parseInt(t.assets[n].height,10),t.image_width=parseInt(t.assets[n].width,10)),r.urlparams&&(t.url+="&".concat(r.urlparams));var i="similar"===this.placement?"".concat(this.mostRecentSearchTerm,"_").concat(t.id,"_top"):"".concat(this.searchTerm,"_").concat(t.id,"_").concat(this.placement);return t.url+="&subId3=".concat(i),t}},{key:"insertItem",value:function(e,t){var a=Object(c.H)(this.resultTemplate,e);this.gridContainer.insertAdjacentHTML("beforeend",a),"video"===Object(c.i)()&&this.addVideoIcon(),t.badgeText&&this.addBadgeElement(t.badgeText)}},{key:"addVideoIcon",value:function(){this.gridContainer.lastElementChild.insertAdjacentHTML("beforeend",'\n    <svg width="30" height="30" class="partner-results__video-icon" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M15 2C7.8203 2 2 7.8203 2 15C2 22.1797 7.8203 28 15 28C22.1797 28 28 22.1797 28 15C28 7.8203 22.1797 2 15 2ZM0 15C0 6.71573 6.71573 0 15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15Z" />\n      <path d="M19.3661 14.1483L12.5241 9.93791C11.8578 9.52789 11 10.0072 11 10.7896V19.2104C11 19.9928 11.8578 20.4721 12.5241 20.0621L19.3661 15.8517C20.0006 15.4612 20.0006 14.5388 19.3661 14.1483Z" />\n    </svg>')}},{key:"addBadgeElement",value:function(e){var t='<span class="ez-resource-thumb__partner-result-badge">'.concat(e,"</span>");this.gridContainer.lastElementChild.insertAdjacentHTML("beforeend",t)}},{key:"rejustifyGrid",value:function(e){this.gridContainer.classList.remove("is-hidden"),window.ezResourceGrid({gridSelector:this.gridContainer,options:{rowHeight:e.rowHeight||70,maxRows:parseInt(e.maxRows,10)||null,truncate:e.truncate||!1},callback:this.gridCallback}),this.adaptGreyBoxHeight()}},{key:"adaptGreyBoxHeight",value:function(){if(this.gridContainer.closest(".partner-sponsored-results")){var e=this.gridContainer.offsetHeight;this.gridContainer.style.height="unset",this.gridContainer.style.maxHeight="".concat(e,"px")}}},{key:"calculateTotalIndex",value:function(e,t,a){return a*(t+1)-(a-e)}},{key:"makeUrlParams",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return"sharedid=".concat(e,"&subId1=").concat(t).concat(Object(o.a)(),"&subId2=").concat(a,"&adtype=").concat(r,"&adplacement=").concat(n)}},{key:"getResults",value:function(e){var t=this;this.placement=e.placement||null,this.recalcRowHeight=e.rowHeight||70,this.recalcMaxRows=parseInt(e.maxRows,10)||null,this.recalcTruncate=e.truncate||!1;var a=this.generateUrl(e);n.a.get(a).then((function(a){a.data&&(a.data.total_count?(t.container.hasAttribute("data-total-count")||t.container.setAttribute("data-total-count",a.data.total_count),t.renderResults(a.data,e),Object(c.Y)("resultsLoaded")):Object(c.Y)("resultsLoaded","END_OF_RESULTS"))})).catch((function(e){console.error(e)}))}},{key:"mostRecentSearchTerm",get:function(){return s.a.get("most_recent_search")||"null"}},{key:"partnerContentType",get:function(){var e=Object(c.i)();return["png","editor_template","psd"].includes(e)?"vector":"photo"===e?"photography":e}}],a&&l(t.prototype,a),r&&l(t,r),e}()},318:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var r=a(13),n=a(14),i=a.n(n),s=a(79),c=a(3),o=a(7),u=a(9),l=a(216);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=f(e);if(t){var n=f(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return g(this,a)}}function g(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(g,e);var t,a,r,n=m(g);function g(){var e;d(this,g);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).noResultTimer=null,e.clearNoResultsTimeout=function(t){"END_OF_RESULTS"!==t.detail&&window.clearTimeout(e.noResultTimer)},e.addMoreButtonHref=function(){var t=document.querySelector(".ez-resource-grid__view-more");t&&(t.href=e.generateSearchUrl)},e}return t=g,(a=[{key:"connect",value:function(){var e=this,t=Object(o.d)(this.element);Object(o.k)({element:this.element,data:{action:u.Ib,category:t,label:"Terms-".concat(this.termsValue),non_interaction:!0}}),this.searchTerm=this.apiResultsWrapperTarget.getAttribute("data-keyword"),this.resourceID=this.apiResultsWrapperTarget.getAttribute("data-resource-id"),this.impactRadiusCouponCodeUrl=this.element.getAttribute("data-impact-radius-coupon-code-url"),this.sharedId=this.element.getAttribute("data-sharedid"),this.subId1=this.element.getAttribute("data-subid-one"),this.subId2=this.element.getAttribute("data-subid-two"),this.partnerServiceUrl=this.element.getAttribute("data-partner-service-url"),this.getPartnerImageResults(),this.noResultTimer=setTimeout((function(){e.element.querySelector(".ez-resource-thumb")||e.element.parentNode.removeChild(e.element)}),this.noResultsDelay),window.addEventListener("resultsLoaded",this.clearNoResultsTimeout)}},{key:"disconnect",value:function(){window.removeEventListener("resultsLoaded",this.clearNoResultsTimeout)}},{key:"trackClick",value:function(e){Object(o.k)({element:this.element,data:{action:u.Hb,label:"Terms-".concat(this.termsValue),partner_click_selection:e}})}},{key:"noResultsDelay",get:function(){return 15e3}},{key:"placement",get:function(){return this.apiResultsWrapperTarget.getAttribute("data-placement")}},{key:"adPlacement",get:function(){var e=document.querySelector("body").dataset.istockAdplacementSuffix;return void 0===e&&(e=""),this.resourceID?"ADP".concat(e):Object(s.a)()?"NRP".concat(e):"SRP".concat(e)}},{key:"partnerClick",value:function(){this.trackClick("Partner-Content")}},{key:"revealPromoCode",value:function(e){e.preventDefault(),this.trackClick("Partner-Coupon"),this.makeCouponWindow(),window.location=this.makeCouponCodePartnerUrl()}},{key:"makeCouponCodePartnerUrl",value:function(){var e="sharedid=".concat(this.sharedId)+"&subId1=coupon"+"&subId2=".concat(this.subId2)+"&adtype=".concat(this.adType)+"&adplacement=".concat(this.adPlacement)+"&subId3=".concat(encodeURI(this.searchTerm),"_CPN_").concat(this.placement)+"&u=".concat(encodeURI("https://www.shutterstock.com/pricing?coupon=EEZY15&coupon_code=EEZY15"));return"".concat(this.impactRadiusCouponCodeUrl,"&").concat(e)}},{key:"makeCouponWindow",value:function(){window.open("","partner-sale","width=520,height=340").location.href="/shutterstock-coupons/coupon_code"}},{key:"getPartnerImageResults",value:function(){var e=new l.a(this.apiResultsWrapperTarget,this.searchTerm,this.partnerServiceUrl,this.addMoreButtonHref),t=e.makeUrlParams(this.sharedId,this.subId1,this.subId2,this.adType,this.adPlacement);e.getResults({controllerElem:this.element,page:this.apiResultsWrapperTarget.getAttribute("data-page"),placement:this.placement,affiliate:this.apiResultsWrapperTarget.getAttribute("data-affiliate"),apiparams:this.apiResultsWrapperTarget.getAttribute("data-apiparams"),impactRadiusUrl:this.apiResultsWrapperTarget.getAttribute("data-impact-radius-url"),limit:this.apiResultsWrapperTarget.getAttribute("data-limit"),loc:this.apiResultsWrapperTarget.getAttribute("data-loc"),rowHeight:this.apiResultsWrapperTarget.getAttribute("data-row-height"),maxRows:this.apiResultsWrapperTarget.getAttribute("data-max-rows"),largeThumb:this.apiResultsWrapperTarget.getAttribute("data-large-thumbs"),urlparams:t,padWithTerm:this.apiResultsWrapperTarget.getAttribute("data-pad-with-term")})}},{key:"viewMoreClick",value:function(){this.trackClick("Partner-View More")}},{key:"generateSearchUrl",get:function(){if("undefined"===typeof this.searchTerm||!this.searchTerm){var e=document.querySelector('[data-search-form-target="input"]');this.searchTerm=e.value}var t=encodeURI(this.searchTerm.replace(/-/g," ")),a=document.querySelector("body").dataset.istockAdplacementSuffix;return void 0===a&&(a=""),"sstk"===(Object(c.g)("shutterstock_partner")?"sstk":"istock")?"videos"===this.getContentType?"".concat(this.apiResultsWrapperTarget.getAttribute("data-impact-radius-url"),"&u=https%3A%2F%2Fwww.shutterstock.com%2Fvideo%2Fsearch%2F").concat(t,"&sharedid=www.vecteezy.com&subId1=view-more&subId2=").concat(this.subId2,"&adtype=").concat(this.adType,"&adplacement=VMB").concat(a,"&subId3=").concat(this.searchTerm,"_view_more_").concat(this.placement):"".concat(this.apiResultsWrapperTarget.getAttribute("data-impact-radius-url"),"&u=https%3A%2F%2Fwww.shutterstock.com%2Fsearch%2F").concat(t,"%3Fimage_type%3D").concat(this.getContentType,"&sharedid=www.vecteezy.com&subId1=view-more&subId2=").concat(this.subId2,"&adtype=").concat(this.adType,"&adplacement=VMB").concat(a,"&subId3=").concat(this.searchTerm,"_view_more_").concat(this.placement):"".concat(this.apiResultsWrapperTarget.getAttribute("data-impact-radius-url"),"?u=https://www.istockphoto.com/").concat(this.getContentType,"/").concat(t,"&sharedid=www.vecteezy.com&subId1=view-more&subId2=").concat(this.subId2,"&adtype=").concat(this.adType,"&adplacement=VMB").concat(a,"&subId3=").concat(this.searchTerm,"_view_more_").concat(this.placement)}},{key:"adType",get:function(){return i.a.get("content_type")||"vector"}},{key:"getContentType",get:function(){return["vector","png"].includes(this.adType)?Object(c.g)("shutterstock_partner")?"vector":"illustrations":"video"===this.adType?"videos":Object(c.g)("shutterstock_partner")?"photo":"photos"}}])&&h(t.prototype,a),r&&h(t,r),g}(r.a);b.targets=["apiResultsWrapper","couponCodeLink"],b.values={terms:String}}}]);
//# sourceMappingURL=search-partner-6607c50fb754aa39fedf.chunk.js.map