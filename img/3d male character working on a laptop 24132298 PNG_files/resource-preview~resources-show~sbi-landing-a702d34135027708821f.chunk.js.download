(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{319:function(e,o,t){"use strict";t.d(o,"a",(function(){return l}));var n=t(13),i=t(3);function r(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,o){return a=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e},a(e,o)}function c(e){var o=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=m(e);if(o){var i=m(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return u(this,t)}}function u(e,o){return!o||"object"!==typeof o&&"function"!==typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):o}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var l=function(e){!function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&a(e,o)}(m,e);var o,t,n,u=c(m);function m(){var e;return r(this,m),(e=u.apply(this,arguments)).initZoom=function(){e.zoomOut(),Object(i.z)()?e.canTouchZoom=!0:(e.teardownTouch(),e.canTouchZoom=!1)},e.toggleZoom=function(o){o.stopPropagation(),e.canZoom&&(e.updateZoomIcon(),e.zoomed?(e.zoomOut(),e.removeZoomListeners(e.imageZoomOuterWrap),e.addZoomListeners(e.element),e.canTouchZoom&&e.teardownTouch()):(e.zoomIn(o),e.removeZoomListeners(e.element),e.addZoomListeners(e.imageZoomOuterWrap),e.canTouchZoom&&e.setupForTouch()))},e.zoomIn=function(o){e.zoomedOnce||e.switchToZoomImg(),e.imageZoomOuterWrap.classList.add("is-zooming"),setTimeout((function(){e.imageZoomOuterWrap.classList.add("is-zoomed"),e.imageZoomOuterWrap.classList.remove("is-zooming")}),300),e.getPointerPos(o),e.updateZoomPosition(),e.hidePreviewPlaceholder(),e.zoomed=!0,e.imageZoomInnerWrap.addEventListener("mousemove",e.zoomMove)},e.zoomMove=function(o){e.touchActive||(e.getPointerPos(o),e.updateZoomPosition())},e.setupForTouch=function(){e.offsetX*=e.zoomScale,e.offsetY*=e.zoomScale,e.touchActive=!0,e.imageZoomInnerWrap.addEventListener("touchstart",e.touchStart),e.imageZoomInnerWrap.addEventListener("touchmove",e.touchMove)},e.teardownTouch=function(){e.imageZoomInnerWrap.removeEventListener("touchstart",e.touchStart,!1),e.imageZoomInnerWrap.removeEventListener("touchmove",e.touchMove,!1),e.touchActive=!1},e.touchStart=function(o){e.prevX=o.touches[0].clientX,e.prevY=o.touches[0].clientY},e.touchMove=function(o){o.preventDefault(),e.offsetX-=e.prevX-o.touches[0].clientX,e.offsetY-=e.prevY-o.touches[0].clientY,e.prevX=o.touches[0].clientX,e.prevY=o.touches[0].clientY,e.setTranslate({xPos:e.offsetX,yPos:e.offsetY,el:e.element,touch:!0})},e.setTranslate=function(o){var t=o.xPos,n=o.yPos,i=o.el,r=o.touch,s=void 0!==r&&r?e.zoomScale:1;i.style.transform="scale(".concat(e.zoomScale,") translate3d(").concat(t/s,"px, ").concat(n/s,"px, 0px)")},e}return o=m,(t=[{key:"connect",value:function(){this.imageZoomOuterWrap=this.element.closest('[data-image-zoom-target="imageZoomOuterWrap"]'),this.imageZoomInnerWrap=this.element.closest('[data-image-zoom-target="imageZoomInnerWrap"]'),this.canZoom&&(this.addZoom(),this.initZoom())}},{key:"disconnect",value:function(){this.canZoom&&(this.removeZoomListeners(this.imageZoomOuterWrap),this.removeZoomListeners(this.element))}},{key:"addZoom",value:function(){this.zoomScale=parseInt(this.imageZoomOuterWrap.getAttribute("data-zoom-scale"),10),this.imageZoomOuterWrap.classList.add("is-zoomable"),this.addZoomListeners(this.element)}},{key:"addZoomListeners",value:function(e){e.addEventListener("click",this.toggleZoom),window.addEventListener("resize",this.initZoom)}},{key:"removeZoomListeners",value:function(e){e.removeEventListener("click",this.toggleZoom),window.removeEventListener("resize",this.initZoom)}},{key:"updateZoomIcon",value:function(){this.imageZoomOuterWrap.querySelectorAll(".zoom-button__icon").forEach((function(e){e.classList.toggle("is-active")}))}},{key:"switchToZoomImg",value:function(){this.element.setAttribute("src",this.element.getAttribute("data-zoom-src")),this.element.removeAttribute("srcset"),this.element.removeAttribute("sizes"),this.zoomedOnce=!0}},{key:"hidePreviewPlaceholder",value:function(){var e=document.querySelector(".ez-resource-show__preview__image--placeholder");null==e||e.remove()}},{key:"zoomOut",value:function(){this.imageZoomOuterWrap.classList.contains("is-zoomed")&&(this.element.style.transform="",this.imageZoomOuterWrap.classList.remove("is-zoomed"),this.zoomed=!1,this.imageZoomInnerWrap.removeEventListener("mousemove",this.zoomMove))}},{key:"updateZoomPosition",value:function(){var e=this.element.width/2,o=this.element.height/2;this.offsetX=e-this.pointerPositionX,this.offsetY=o-this.pointerPositionY,this.setTranslate({xPos:this.offsetX,yPos:this.offsetY,el:this.element})}},{key:"getPointerPos",value:function(e){this.pointerPositionX=e.clientX||this.pointerPositionX,this.pointerPositionY=e.clientY||this.pointerPositionY;var o=this.imageZoomInnerWrap.getBoundingClientRect();this.pointerPositionX-=o.left,this.pointerPositionY-=o.top}},{key:"canZoom",get:function(){return void 0!==this.imageZoomOuterWrap.dataset.zoomable}}])&&s(o.prototype,t),n&&s(o,n),m}(n.a)}}]);
//# sourceMappingURL=resource-preview~resources-show~sbi-landing-a702d34135027708821f.chunk.js.map